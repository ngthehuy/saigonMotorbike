var fixedtoc=function(r){var t,e={init:function(){fixedtocOption.scrollDuration=500,fixedtocOption.fadeTriggerDuration=5e3,fixedtocOption.scrollOffset=c(fixedtocOption.scrollOffset),fixedtocOption.fixedOffsetX=c(fixedtocOption.fixedOffsetX),fixedtocOption.fixedOffsetY=c(fixedtocOption.fixedOffsetY),fixedtocOption.contentsFixedHeight=c(fixedtocOption.contentsFixedHeight),fixedtocOption.contentsWidthInPost=c(fixedtocOption.contentsWidthInPost),fixedtocOption.contentsHeightInPost=c(fixedtocOption.contentsHeightInPost),fixedtocOption.triggerBorderWidth=t(fixedtocOption.triggerBorder),fixedtocOption.contentsBorderWidth=t(fixedtocOption.contentsBorder),fixedtocOption.triggerSize=c(fixedtocOption.triggerSize)},set:i,update:function(t,e,n){i(t,e,n)},remove:function(t){void 0!==fixedtocOption[t]&&delete fixedtocOption[t]}};function i(t,e,n){fixedtocOption[t]="int"==n?c(e):"float"==n?parseFloat(e)||0:e}var a,o={inWidgetProp:void 0,showAdminbar:function(){return fixedtocOption.showAdminbar},isQuickMin:function(){return fixedtocOption.isQuickMin},isEscMin:function(){return fixedtocOption.isEscMin},isEnterMax:function(){return fixedtocOption.isEnterMax},isNestedList:function(){return fixedtocOption.isNestedList},isColExpList:function(){return fixedtocOption.isColExpList},showColExpIcon:function(){return fixedtocOption.showColExpIcon},isAccordionList:function(){return fixedtocOption.isAccordionList},showTargetHint:function(){return!0},supportInPost:function(){return fixedtocOption.inPost},inWidget:function(){return!!fixedtocOption.inWidget&&(void 0===this.inWidgetProp&&(this.inWidgetProp=!!r("#ftwp-widget-container").length),this.inWidgetProp)},fixedWidget:function(){return!!this.inWidget()&&fixedtocOption.fixedWidget},isAutoHeightFixedToPost:function(){return 0==fixedtocOption.contentsFixedHeight},isFloat:function(){return"none"!=fixedtocOption.contentsFloatInPost},isAutoHeightInPost:function(){return 0==fixedtocOption.contentsHeightInPost},isPositionAtFixed:function(t){return-1!=fixedtocOption.fixedPosition.indexOf(t)},isDebug:function(){return 1==fixedtocOption.debug},isNotBlur:function(){var t=navigator.userAgent.toLowerCase();return-1<t.indexOf("android")||-1<t.indexOf("firefox")},isMobile:function(){return w.data.window.width<=768},isClickableHeader:function(){return 1==fixedtocOption.isClickableHeader},isColExpInitMobile:function(){return 1==fixedtocOption.contentsColexpInitMobile}};function c(t){return parseInt(t)||0}function n(t){if(!t.length)return 0;var e=0;return t.each(function(){var t=r(this);"fixed"==t.css("position")&&(e+=c(t.outerHeight()))}),e}function s(t){t.preventDefault()}function d(t){return c(t-2*fixedtocOption.contentsBorderWidth)}function f(t){o.isDebug()&&console.log(t)}var u,p,l,g,h,x,w=(l={set:function(){var t;o.isAutoHeightInPost()||fixedtocOption.contentsColexpInit?(a.container.css("position","static"),t=a.containerOuter.outerHeight(),a.container.css("position","")):t=fixedtocOption.contentsHeightInPost,a.containerOuter.css("height",t+"px"),p.containerOuterHeight=t},update:function(){function t(){a.containerOuter.css("height","auto"),a.contents.css("height","auto"),J.setAuto(),p.containerOuterHeight=a.containerOuter.outerHeight()}D.location.inPost&&(o.isAutoHeightInPost()||"collapse"==a.contents.data("colexp")?t():(a.containerOuter.css("height",fixedtocOption.contentsHeightInPost+"px"),a.contents.css("height",fixedtocOption.contentsHeightInPost+"px"),J.set(d(fixedtocOption.contentsHeightInPost)),p.containerOuterHeight=a.containerOuter.outerHeight()))}},g={set:E,updateOnResize:function(){E()},updateHeight:function(){p.ftocRectInWidget.height=u()}},{data:p={},ftocRectInWidget:g,createOnInit:function(){v(),m(),O(),fixedtocOption.fixedMenu&&T(),I(),W(),o.supportInPost()&&(l.set(),H()),b(),A(),R(),o.inWidget()&&M(),o.fixedWidget()&&(z(),g.set()),P(),f(this.data)},updateOnResize:function(){v(),m(),O(),fixedtocOption.fixedMenu&&T(),I(),W(),o.supportInPost()&&(l.update(),H()),b(),A(),R(),o.inWidget()&&M(),o.fixedWidget()&&(z(),g.updateOnResize()),P(),f(p)},updateOnScroll:function(){m(),fixedtocOption.fixedMenu&&(void 0===h&&(h=p.fixedMenuHeight),T(),h!==p.fixedMenuHeight&&(I(),W(),o.supportInPost()&&H(),b(),A(),R(),o.inWidget()&&M(),o.fixedWidget()&&(z(),g.updateOnResize()),P(),h=p.fixedMenuHeight,f(p)))},updateInPost:function(){l.update(),H(),b(),P(),A(),R()},updateOnDocumentHeightChange:function(){C(),p.document.height!=x&&(fixedtoc.reload(),x=p.document.height)},setDocumentHeight:C});function m(){p.scrollTop=a.window.scrollTop()}function v(){p.window={},p.window.width=window.innerWidth,p.window.height=window.innerHeight}function C(){p.document={},p.document.height=Math.round(a.document.height())}function O(){p.adminbarHeight=o.showAdminbar()?n(r("#wpadminbar")):0}function T(){p.fixedMenuHeight=n(r(fixedtocOption.fixedMenu))}function I(){fixedtocOption.fixedMenu?p.fixedHeight=p.adminbarHeight+p.fixedMenuHeight:p.fixedHeight=p.adminbarHeight}function W(){p.fixedOffsetTop=p.fixedHeight+fixedtocOption.fixedOffsetY}function b(){p.headingOffset=p.fixedHeight+fixedtocOption.scrollOffset}function P(){p.headingsTop=[],r.each(a.anchors,function(){var t=r(r(this).attr("href")),e=t.length?c(t.offset().top-p.headingOffset):NaN;isNaN(e)||p.headingsTop.push({headingTop:e,anchorEle:r(this)})})}function A(){p.postRect={};var t=a.postContent.offset(),e=a.postContent.outerWidth(),n=a.postContent.outerHeight();p.postRect.left=t.left,p.postRect.top=t.top,p.postRect.width=e,p.postRect.right=p.postRect.left+p.postRect.width,p.postRect.bottom=n+p.postRect.top,p.postRect.height=p.postRect.bottom-p.postRect.top}function R(){p.ftocRangeY={},o.supportInPost()?p.ftocRangeY.top=p.inPostRangeY.bottom:p.ftocRangeY.top=p.postRect.top-p.fixedHeight,p.ftocRangeY.bottom=p.postRect.bottom-p.window.height}function H(){p.inPostRangeY={},p.inPostRangeY.top=0,p.inPostRangeY.bottom=a.containerOuter.offset().top+p.containerOuterHeight-p.fixedHeight}function M(){p.inWidgetMinWidth=p.postRect.width+a.widgetContainer.outerWidth()}function z(){p.fixedWidgetRangeY={},p.fixedWidgetRangeY.top=a.widgetContainer.offset().top-p.fixedHeight,p.fixedWidgetRangeY.bottom=p.ftocRangeY.bottom}function E(){p.ftocRectInWidget={left:a.widgetContainer.offset().left,top:p.fixedHeight,width:a.widgetContainer.outerWidth(),height:u()}}var _={fixedWidget:function(){return!!o.fixedWidget()&&!!y()&&w.data.fixedWidgetRangeY.top<=w.data.scrollTop&&w.data.fixedWidgetRangeY.bottom>w.data.scrollTop},inWidget:y,inPost:function(){return!!o.supportInPost()&&w.data.inPostRangeY.bottom>w.data.scrollTop},fixedToPost:function(){return w.data.ftocRangeY.top<=w.data.scrollTop&&w.data.ftocRangeY.bottom>w.data.scrollTop}};function y(){return o.inWidget()&&!o.isMobile()}var k,F,D={location:k={fixedWidget:!(u=function(){var t;return"collapse"==a.contents.data("colexp")?(a.contents.css("height","auto"),t=a.contents.outerHeight(),a.contents.css("height","")):t=window.innerHeight-p.fixedHeight,t}),inWidget:!(t=function(t){switch(t){case"thin":return 1;case"medium":return 2;case"bold":return 5;default:return 0}}),inPost:!(F=["common","hidden","fixedToPost","inPost","inWidget","fixedWidget"]),fixedToPost:!1,hidden:!1},register:function(t,e){-1!=r.inArray(t,F)?(void 0!==e._construct&&a.container.on("ftoc_"+t,e._construct),"common"!=t&&void 0!==e._destruct&&a.container.on("_ftoc_"+t,e._destruct)):f("Not support this event: "+t)},updateOnResize:function(){Y("resize")},updateOnScroll:function(){Y("scroll")},init:function(){a.container.trigger("ftoc_common"),Y("init")}};function Y(o){function t(t){for(var e=F.length,n={location:t,eventType:o},i=1;i<e;i++)t!=F[i]&&a.container.trigger("_ftoc_"+F[i],n);a.container.trigger("ftoc_"+t,n)}function e(t){for(var e=1,n=F.length;e<n;e++)void 0!==t&&t==F[e]?k[t]=!0:k[F[e]]=!1}_.fixedWidget()?k.fixedWidget||(e("fixedWidget"),t("fixedWidget"),f(k)):_.inWidget()?k.inWidget||(e("inWidget"),t("inWidget"),f(k)):_.inPost()?k.inPost||(e("inPost"),t("inPost"),f(k)):_.fixedToPost()?k.fixedToPost||(e("fixedToPost"),t("fixedToPost"),f(k)):k.hidden||(e("hidden"),t("hidden"),f(k))}var S,L,N,B,Q,X,j,q,G,J={set:function(t){var e=void 0!==t?t:a.contents.height();a.list.css("height",e-a.header.outerHeight()+"px")},setAuto:function(){a.list.css("height","auto")},unset:function(){a.list.css("height","")}};o.isColExpList()&&(L=function(t,e){var n=void 0===e?r(this):e,i=n.parent(".ftwp-has-sub");i.length&&(n.hasClass("ftwp-anchor")?j(i,n.prev("button")):B(i,n))},N=function(t,e){var n=void 0===e?r(this):e,i=n.parent(".ftwp-item");i.length&&(n.hasClass("ftwp-anchor")?Q(i,n.prev("button")):(B(i,n),q(i)))},B=function(t,e){t.hasClass("ftwp-collapse")?j(t,e):t.hasClass("ftwp-expand")&&X(t,e)},Q=function(t,e){q(t),t.hasClass("ftwp-has-sub")&&j(t,e)},X=function(t,e){t.removeClass("ftwp-expand").addClass("ftwp-collapse"),e.length&&e.removeClass("ftwp-icon-expand").addClass("ftwp-icon-collapse")},j=function(t,e){t.removeClass("ftwp-collapse").addClass("ftwp-expand"),e.length&&e.removeClass("ftwp-icon-collapse").addClass("ftwp-icon-expand")},q=function(e){a.hasSubItems.each(function(){var t=r(this);t.get(0)!=e.get(0)&&(t.find(e).length||X(t,t.children("button")))})},G=function(t){o.isAccordionList()&&q(t.parent(".ftwp-item"));var e=t.parents(".ftwp-has-sub");e&&e.each(function(){var t=r(this),e=t.children("button");j(t,e)})},S={_construct:function(){o.showColExpIcon()&&o.isAccordionList()?(a.colExpIcons.on("click",N),a.container.on("ftocAfterScrollToTarget",N)):o.showColExpIcon()?(a.colExpIcons.on("click",L),a.container.on("ftocAfterScrollToTarget",L)):a.container.on("ftocAfterScrollToTarget",N),o.showColExpIcon()&&a.colExpIcons.on("mousedown",s),a.container.on("ftocAfterTargetIndicated",function(t,e){G(e)}),f("Activated colExpSubList().")}});var K,U,V,Z,$,tt,et,nt,it,ot,ct,st,rt,at,dt,ft,ut,pt,lt,gt,ht,xt,wt,mt,vt,Ct,Ot,Tt=(U=!1,V=function(t){var n,e,i=t.attr("href"),o=r(i),c=t.data("index"),s=w.data.headingsTop[c];void 0!==s&&(n=s.headingTop,e=i.substr(1),a.headings.removeClass("ftwp-heading-target"),o.attr("id","").addClass("ftwp-heading-target"),window.location.hash=i,o.attr("id",e),r("html, body").animate({scrollTop:n},{duration:fixedtocOption.scrollDuration,start:function(){U=!0}}).promise().then(function(){U=!1;var e=w.data.headingsTop[c].headingTop;n!=e&&r("html, body").animate({scrollTop:e},100,function(){var t=w.data.headingsTop[c].headingTop;e!=t&&r("html, body").animate({scrollTop:t},1,function(){})}),Z(t),a.container.trigger("ftocAfterScrollToTarget",[t,n])}))},{_construct:function(){a.anchors.on("click",function(t){t.preventDefault();var e=r(t.currentTarget);V(e)}),a.anchors.on("mousedown",s),f("Activated scrollToTarget().")},activeCurrent:Z=function(t){var e;$(),(K=t).addClass("ftwp-active"),(D.location.fixedToPost||D.location.fixedWidget)&&(t.is(":focus")||U||t.focus()),!o.showColExpIcon()||(e=t.prev()).length&&e.addClass("ftwp-active")},deactivateAll:function(){K=void 0,a.anchors.removeClass("ftwp-active").blur(),o.showColExpIcon()&&a.colExpIcons.removeClass("ftwp-active")},deactivatePrev:$=function(){var t;K&&(K.removeClass("ftwp-active").blur(),!o.showColExpIcon()||(t=K.prev()).length&&t.removeClass("ftwp-active"))}}),It=(nt=function(){var e=w.data.headingsTop,n=w.data.scrollTop;if(e[0].headingTop>n||w.data.ftocRangeY.bottom<n)return void 0!==tt&&Tt.deactivateAll(),void(tt=void 0);if(void 0!==et&&et!=w.data.document.height)return t(),void f("Fixed target indicator!!");function t(){r.each(e,function(t){return void 0===e[t+1]&&this.headingTop<=w.data.ftocRangeY.bottom?(tt=[this,e[t],t],et=w.data.document.height,Tt.activeCurrent(this.anchorEle),a.container.trigger("ftocAfterTargetIndicated",[this.anchorEle,n]),!1):this.headingTop<=n&&e[t+1].headingTop>n?(tt=[this,e[t+1],t],void 0===w.data.document&&w.setDocumentHeight(),et=w.data.document.height,Tt.activeCurrent(this.anchorEle),a.container.trigger("ftocAfterTargetIndicated",[this.anchorEle,n]),!1):void 0})}void 0!==tt&&tt[0].headingTop<=n&&tt[1].headingTop>n||t()},{_construct:function(){a.window.on("ftocScroll",nt).on("ftocResize",nt),f("Actived targetIndicator().")},start:function(){a.window.on("ftocScroll",nt).on("ftocResize",nt)},stop:function(){a.window.off("ftocScroll",nt).off("ftocResize",nt)}}),Wt=(it=function(){ot()},ot=function(){a.list.on("scroll",st),a.list.on("mouseleave",rt),a.document.on("click",at),a.window.on("scroll",rt)},ct=function(){a.body.removeClass("ftwp-no-scroll"),a.list.off("scroll",st),a.list.off("mouseleave",rt),a.document.off("click",at),a.window.off("scroll",rt)},st=function(){a.body.addClass("ftwp-no-scroll")},rt=function(){a.body.hasClass("ftwp-no-scroll")&&(a.list.off("scroll",st),a.body.removeClass("ftwp-no-scroll"),setTimeout(function(){a.list.on("scroll",st)},100))},at=function(t){r.contains(a.list.get(0),t.target)||rt()},{_construct:function(){a.container.addClass("ftwp-hidden-state"),f("Actived hideToc().")},_destruct:function(){a.container.removeClass("ftwp-hidden-state"),f("Deactivated hideToc().")}}),bt=(pt=function(){a.container.addClass("ftwp-fixed-to-post"),a.container.parent().is(a.body)||a.container.appendTo(a.body),a.minIcon.addClass("ftwp-icon-minimize"),o.isMobile()&&a.container.hasClass("ftwp-maximize")&&a.container.removeClass("ftwp-maximize").addClass("ftwp-minimize")},lt=function(){a.container.removeClass("ftwp-fixed-to-post"),a.minIcon.removeClass("ftwp-icon-minimize")},dt=function(t,e,n){Pt(t,n)?(t.css({left:"0px",right:"auto"}),Ot.reverseTransformOrigin(t)):t.css({right:e+"px",left:"auto"})},ft=function(t,e,n){Pt(t,n)?(t.css({right:"0px",left:"auto"}),Ot.reverseTransformOrigin(t)):t.css({left:e+"px",right:"auto"})},ut=function(){o.isPositionAtFixed("top")?(a.trigger.css("top",w.data.fixedOffsetTop+"px"),a.contents.css("top",w.data.fixedOffsetTop+"px")):o.isPositionAtFixed("middle")?a.contents.css("top",w.data.fixedHeight+"px"):(a.trigger.css("top",""),a.contents.css("top",""))},gt={set:function(){var t,e,n,i;Ot.setTransformOrigin(),o.isPositionAtFixed("left")?(t=w.data.window.width-w.data.postRect.left+fixedtocOption.fixedOffsetX,e=w.data.postRect.left-fixedtocOption.fixedOffsetX,dt(a.trigger,t,e),dt(a.contents,t,e)):(n=w.data.postRect.right+fixedtocOption.fixedOffsetX,i=w.data.window.width-n,ft(a.trigger,n,i),ft(a.contents,n,i)),ut(),xt.reset()},unset:function(){a.trigger.css({left:"",right:"",top:""}),a.contents.css({left:"",right:"",top:""}),Ot.removeTransformOrigin()}},ht=function(){var t;return o.isAutoHeightFixedToPost()?o.isColExpList()?t=window.innerHeight:(J.setAuto(),a.contents.css("height","auto"),t=a.contents.outerHeight(),At(),J.unset()):t=fixedtocOption.contentsFixedHeight,t},xt={reset:function(){var t=ht(),e=o.isPositionAtFixed("middle")?w.data.window.height-w.data.fixedHeight:w.data.window.height-w.data.fixedOffsetTop,n=e<t?e:t;a.contents.css("height",n+"px");var i=d(n);J.set(i)},unset:At},vt="ftwp-animate-"+fixedtocOption.inOutEffect+"-in",Ct="ftwp-animate-"+fixedtocOption.inOutEffect+"-inOut",{_construct:function(){pt(),gt.set(),a.window.on("ftocResize",gt.set),Ot.in(),a.container.on("ftocAfterMinMax",Ot.inOut),f("Actived ftocInOut().")},_destruct:function(){lt(),gt.unset(),a.window.off("ftocResize",gt.set),xt.unset(),J.unset(),Ot.out(),a.container.off("ftocAfterMinMax",Ot.inOut),f("Deactivated ftocInOut().")},effectInCls:(Ot={inCls:vt,in:function(){a.container.addClass(vt)},inOut:function(){a.container.removeClass(vt+" "+Ct),a.container.offsetWidth,a.container.addClass(Ct),setTimeout(function(){a.container.removeClass(Ct)},1e3)},out:function(){a.container.removeClass(vt+" "+Ct)},setTransformOrigin:function(){var t,e,n=fixedtocOption.fixedPosition.match(/(\w+)-(\w+)/i);n&&("left"==(t=n[2])?t="right":"right"==t&&(t="left"),"middle"==(e=n[1])&&(e="center"),wt="ftwp-transform-"+t+"-"+e,a.trigger.removeClass(mt).addClass(wt),a.contents.removeClass(mt).addClass(wt))},reverseTransformOrigin:function(t){mt=wt.match(/left/i)?wt.replace("left","right"):wt.replace("right","left"),t.removeClass(wt).addClass(mt)},removeTransformOrigin:function(){a.trigger.removeClass(wt+" "+mt),a.contents.removeClass(wt+" "+mt)}}).inCls});function Pt(t,e){return e<=t.outerWidth()}function At(){a.contents.css("height","")}var Rt,Ht,Mt,zt,Et,_t,yt,kt,Ft,Dt,Yt,St,Lt,Nt,Bt,Qt,Xt,jt,qt,Gt,Jt,Kt,Ut,Vt,Zt,$t,te,ee,ne,ie,oe,ce,se,re,ae,de,fe,ue,pe,le,ge,he,xe,we,me,ve,Ce,Oe,Te,Ie,We,be,Pe,Ae,Re,He,Me=(Rt=function(){a.container.removeClass("ftwp-minimize").addClass("ftwp-maximize"),a.container.trigger("ftocAfterMinMax"),a.container.trigger("ftocAfterMaximize"),f("Maximized FTOC.")},Mt=function(t){"touchstart"==t.type&&768<w.data.window.width||a.container.hasClass("ftwp-maximize")&&!r.contains(a.container.get(0),t.target)&&Ht()},zt=function(t){a.container.hasClass("ftwp-maximize")&&27==t.keyCode&&Ht()},Et=function(t){a.container.hasClass("ftwp-minimize")&&13==t.keyCode&&Rt()},{_construct:function(){var t=o.isClickableHeader()?a.header:a.minIcon;a.trigger.on("click",Rt),t.on("click",Ht),a.trigger.on("mousedown",s),t.on("mousedown",s),o.isQuickMin()&&a.document.on("click touchstart",Mt),o.isEscMin()&&a.document.on("keyup",zt),o.isEnterMax()&&a.document.on("keyup",Et),f("Actived minMaxFtoc().")},_destruct:function(){var t=o.isClickableHeader()?a.header:a.minIcon;a.trigger.off("click",Rt),t.off("click",Ht),a.trigger.off("mousedown",s),t.off("mousedown",s),o.isQuickMin()&&a.document.off("click",Mt),o.isEscMin()&&a.document.off("keyup",zt),o.isEnterMax()&&a.document.off("keyup",Et),f("Deactivated minMaxFtoc.")},isMax:function(){return!!a.container.hasClass("ftwp-maximize")},isMin:function(){return!!a.container.hasClass("ftwp-minimize")},minimize:Ht=function(){a.container.removeClass("ftwp-maximize").addClass("ftwp-minimize"),a.container.trigger("ftocAfterMinMax"),a.container.trigger("ftocAfterMinimize"),f("Minimized FTOC.")}}),ze=(yt="ftwp-fade-trigger",kt="ftwp-unfade-trigger",Yt=function(){void 0!==_t&&(clearTimeout(_t),a.trigger.removeClass(yt).addClass(kt))},St=function(){void 0!==_t&&(Dt(),Ft())},Lt=function(){Yt()},Nt=function(){St()},{_construct:function(){a.container.hasClass("ftwp-minimize")&&Ft(),a.trigger.on("mouseenter",Yt).on("mouseleave",St),a.container.on("ftocAfterMinimize",Ft).on("ftocAfterMaximize",Dt),f("Actived fadeTrigger().")},_destruct:function(){Dt(),a.trigger.off("mouseenter",Lt),a.trigger.off("mouseleave",Nt),a.container.off("ftocAfterMinimize",Ft),a.container.off("ftocAfterMaximize",Dt),f("Deactivated fadeTrigger().")},stop:Dt=function(){void 0!==_t&&(clearTimeout(_t),_t=void 0,a.trigger.removeClass(yt+" "+kt))},start:Ft=function(){void 0===_t&&(setTimeout(function(){a.container.removeClass(bt.effectInCls)},500),_t=setTimeout(function(){a.trigger.addClass(yt)},fixedtocOption.fadeTriggerDuration))},restart:St,mouseLeave:Nt}),Ee={start:function(t){o.isNotBlur()||t&&t.length&&t.removeClass("ftwp-unblur").addClass("ftwp-blur")},stop:function(t){t&&t.length&&t.hasClass("ftwp-blur")&&(t.removeClass("ftwp-blur").addClass("ftwp-unblur"),setTimeout(function(){t.removeClass("ftwp-unblur")},500))},clear:function(t){t&&t.length&&t.removeClass("ftwp-blur ftwp-unblur")}},_e=(Qt=function(){Bt=a.container.siblings(':not("script, style")'),Me.isMax()&&Kt()&&Ee.start(Bt)},Xt=function(){Me.isMax()&&Kt()?Ee.start(Bt):Ee.stop(Bt)},jt=function(){Kt()&&Ee.start(Bt)},qt=function(){Ee.stop(Bt)},Gt=function(t,e){Kt()&&a.container.hasClass("ftwp-maximize")&&(Me.minimize(),Ee.stop(Bt),e.blur())},Jt=function(){Ee.clear(Bt)},Kt=function(){return.6*a.window.width()<=a.contents.outerWidth()},{_construct:function(){Qt(),a.window.on("ftocResize",Xt),a.container.on("ftocAfterMaximize",jt),a.container.on("ftocAfterMinimize",qt),a.container.on("ftocAfterScrollToTarget",Gt),f("Actived blurBody().")},_destruct:function(){Jt(),a.window.off("ftocResize",Xt),a.container.off("ftocAfterMaximize",jt),a.container.off("ftocAfterMinimize",qt),a.container.off("ftocAfterScrollToTarget",Gt),f("Deactivated blurBody().")}});o.fixedWidget()&&(Zt=function(){"expand"==a.contents.data("colexp")&&Ee.start(Vt)},$t=function(){Ee.start(Vt)},te=function(){Ee.stop(Vt)},ee=function(){Ee.clear(Vt)},Ut={_construct:function(){Vt=a.widget.siblings(".widget"),Zt(),a.contents.on("ftocAfterExpandContents",$t),a.contents.on("ftocAfterCollapseContents",te),f("Actived blurWidgets().")},_destruct:function(){ee(),a.contents.off("ftocAfterExpandContents",$t),a.contents.off("ftocAfterCollapseContents",te),f("Deactivated blurWidgets().")}}),(o.inWidget()||o.supportInPost())&&(ce=!0,se=function(){o.isMobile()&&ce?(console.log(o.isColExpInitMobile()),o.isColExpInitMobile()?fe(0,oe):ue(0,ie),Ye.reload()):de()?ue(0,ie):fe(0,oe),ce=!1},re=function(){a.list.show(0),a.minIcon.removeClass("ftwp-icon-collapse ftwp-icon-expand")},ae=function(t){de()?fe(100,oe,t):ue(100,ie,t)},de=function(){var t=a.contents.data("colexp");return"expand"==t||void 0===t},fe=function(t,e,n){a.list.hide(t,function(){a.minIcon.removeClass("ftwp-icon-expand").addClass("ftwp-icon-collapse"),void 0!==e&&e(n)}),a.contents.data("colexp","collapse"),a.contents.trigger("ftocAfterCollapseContents"),f("Collapsed contents.")},ue=function(t,e,n){a.list.show(t,function(){a.minIcon.removeClass("ftwp-icon-collapse").addClass("ftwp-icon-expand"),void 0!==e&&e(n)}),a.contents.data("colexp","expand"),a.contents.trigger("ftocAfterExpandContents"),f("Expanded contents.")},ne={construct:function(t,e){ie=t,oe=e,se();var n=o.isClickableHeader()?a.header:a.minIcon;n.on("mousedown",s),n.on("click",ae)},destruct:function(){re();var t=o.isClickableHeader()?a.header:a.minIcon;t.off("mousedown",s),t.off("click",ae)}}),o.inWidget()&&(pe={_construct:function(){ne.construct(),f("Actived colExpConentsInWidget().")},_destruct:function(){ne.destruct(),f("Deactivated colExpConentsInWidget().")}}),o.fixedWidget()&&(ge=function(){w.ftocRectInWidget.updateHeight(),me.setFixed()},he=function(){w.ftocRectInWidget.updateHeight(),me.setFixed()},le={_construct:function(){ne.construct(ge,he),f("Actived colExpConentsInFixedWidget().")},_destruct:function(){ne.destruct(),f("Deactivated colExpConentsInFixedWidget().")}}),o.inWidget()&&(xe={_construct:function(){we(),f("Actived displayInWidget().")},_destruct:function(){a.contents.css("height",""),f("Deactivated displayInWidget().")},init:we=function(){a.container.parent().is(a.widgetContainer)||a.container.appendTo(a.widgetContainer),a.contents.css("height","auto")}}),o.fixedWidget()&&(ve=function(){xe.init()},Oe=function(){a.widget.removeClass("ftwp-widget-fixed"),a.contents.css({left:"",top:"",width:"",height:""})},me={_construct:function(){ve(),Ce(),a.window.on("ftocResize",Ce),f("Actived fixedInWidget().")},_destruct:function(){ve(),Oe(),a.window.off("ftocResize",Ce),J.unset(),f("Deactivated fixedInWidget().")},setFixed:Ce=function(){a.widget.addClass("ftwp-widget-fixed");var t=w.data.ftocRectInWidget;a.contents.css({left:t.left,top:t.top,width:t.width+"px",height:t.height+"px"});var e=d(t.height);J.set(e)}}),o.supportInPost()&&(Ae=function(){a.container.parent().is(a.containerOuter)||a.container.appendTo(a.containerOuter),He()},Re=function(){a.contents.css("height",""),J.unset()},He=function(){0==fixedtocOption.contentsWidthInPost&&o.isFloat()?(a.containerOuter.css("width",""),Pe=a.containerOuter.outerWidth(),a.containerOuter.css("width",Pe+"px")):a.containerOuter.css("width",""),a.containerOuter.css("height",w.data.containerOuterHeight+"px"),a.contents.css("height",w.data.containerOuterHeight+"px");var t=d(w.data.containerOuterHeight);J.set(t)},Te={_construct:function(){Ae(),a.window.on("ftocResize",He),f("Actived displayInPost().")},_destruct:function(){Re(),a.window.off("ftocResize",He),f("Deactivated displayInPost().")}},We=function(t){be(t)},be=function(t){void 0!==t&&"click"==t.type&&w.updateInPost()},Ie={_construct:function(){ne.construct(We,be),f("Actived colExpConentsInFixedWidget().")},_destruct:function(){ne.destruct(),f("Deactivated colExpConentsInFixedWidget().")}});var ye,ke,Fe,De,Ye=(ye=function(){w.createOnInit(),o.isColExpList()&&D.register("common",S),D.register("common",Tt),D.register("common",It),D.register("hidden",Wt),o.fixedWidget()&&(D.register("fixedWidget",le),D.register("fixedWidget",me),D.register("fixedWidget",Ut)),o.inWidget()&&(D.register("inWidget",xe),D.register("inWidget",pe)),o.supportInPost()&&(D.register("inPost",Te),D.register("inPost",Ie)),D.register("fixedToPost",bt),D.register("fixedToPost",Me),D.register("fixedToPost",ze),D.register("fixedToPost",_e),D.init(),a.window.resize(ke),a.window.scroll(Fe)},ke=function(){w.updateOnResize(),D.updateOnResize(),a.window.trigger("ftocResize")},Fe=function(){w.updateOnDocumentHeightChange(),w.updateOnScroll(),D.updateOnScroll(),a.window.trigger("ftocScroll")},{option:e,onReady:function(){e.init(),(a={window:r(window),document:r(document),body:r("body"),container:r("#ftwp-container"),trigger:r("#ftwp-trigger"),contents:r("#ftwp-contents"),header:r("#ftwp-header"),minIcon:r("#ftwp-header-minimize"),list:r("#ftwp-list"),postContent:r("#ftwp-postcontent"),headings:r(".ftwp-heading")}).anchors=a.list.find(".ftwp-anchor").not(".ftwp-otherpage-anchor"),o.isNestedList()&&(a.hasSubItems=a.list.find(".ftwp-has-sub")),o.showColExpIcon()&&(a.colExpIcons=a.list.find(".ftwp-icon-expand, .ftwp-icon-collapse")),o.inWidget()&&(a.widget=r(".ftwp-widget"),a.widgetContainer=r("#ftwp-widget-container")),o.supportInPost()&&(a.containerOuter=r("#ftwp-container-outer")),f(a),a.anchors.each(function(t){r(this).data("index",t)}),a.container.trigger("ftocReady"),ye(),setTimeout(De,100),a.window.load(De),f(fixedtocOption)},reload:De=function(){f(fixedtocOption),w.updateOnResize(),D.updateOnResize(),a.window.trigger("ftocResize")}});return r(document).ready(Ye.onReady),{option:Ye.option,reload:Ye.reload}}(jQuery);